<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Filters &#8212; Djula HTML templating system 0.2 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Template inheritance" href="inheritance.html" />
    <link rel="prev" title="Verbatim" href="verbatim.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Djula HTML templating system</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="tags.html">Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="comments.html">Comments</a></li>
<li class="toctree-l1"><a class="reference internal" href="verbatim.html">Verbatim</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="inheritance.html">Template inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="internationalization.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="error-handling.html">Error handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Filters</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#list-of-filters">List of filters</a><ul>
<li><a class="reference internal" href="#add">add</a></li>
<li><a class="reference internal" href="#addslashes">addslashes</a></li>
<li><a class="reference internal" href="#capfirst">capfirst</a></li>
<li><a class="reference internal" href="#cut">cut</a></li>
<li><a class="reference internal" href="#date">date</a></li>
<li><a class="reference internal" href="#time">time</a></li>
<li><a class="reference internal" href="#datetime">datetime</a></li>
<li><a class="reference internal" href="#default">default</a></li>
<li><a class="reference internal" href="#reverse">reverse</a></li>
<li><a class="reference internal" href="#sort">sort</a></li>
<li><a class="reference internal" href="#first">first</a></li>
<li><a class="reference internal" href="#join">join</a></li>
<li><a class="reference internal" href="#last">last</a></li>
<li><a class="reference internal" href="#length">length</a></li>
<li><a class="reference internal" href="#linebreaks">linebreaks</a></li>
<li><a class="reference internal" href="#linebreaksbr">linebreaksbr</a></li>
<li><a class="reference internal" href="#lower">lower</a></li>
<li><a class="reference internal" href="#safe-escape">safe, escape</a></li>
<li><a class="reference internal" href="#slice">slice</a></li>
<li><a class="reference internal" href="#force-escape">force-escape</a></li>
<li><a class="reference internal" href="#format">format</a></li>
<li><a class="reference internal" href="#replace-with">replace … with</a></li>
<li><a class="reference internal" href="#scan">scan</a></li>
<li><a class="reference internal" href="#id4">time</a></li>
<li><a class="reference internal" href="#truncatechars">truncatechars</a></li>
<li><a class="reference internal" href="#upper">upper</a></li>
<li><a class="reference internal" href="#urlencode">urlencode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-filters">Custom filters</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="verbatim.html" title="Previous Chapter: Verbatim"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Verbatim</span>
    </a>
  </li>
  <li>
    <a href="inheritance.html" title="Next Chapter: Template inheritance"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Template inheritance &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/filters.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="filters">
<h1>Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>You can modify variables for display by using <strong>filters</strong>.</p>
<p>Filters look like this: <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">name|lower</span> <span class="pre">}}</span></code>. This displays the value of the
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">name</span> <span class="pre">}}</span></code> variable after being filtered through the <a href="#id1"><span class="problematic" id="id2">:tfilter:`lower`</span></a>
filter, which converts text to lowercase. Use a pipe (<code class="docutils literal notranslate"><span class="pre">|</span></code>) to apply a filter.</p>
<p>Filters can be “chained.” The output of one filter is applied to the next.
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">text|escape|linebreaks</span> <span class="pre">}}</span></code> is a common idiom for escaping text contents,
then converting line breaks to <code class="docutils literal notranslate"><span class="pre">&lt;p&gt;</span></code> tags.</p>
<p>Some filters take arguments. A filter argument looks like this: <code class="docutils literal notranslate"><span class="pre">{{</span>
<span class="pre">bio|truncatewords:30</span> <span class="pre">}}</span></code>. This will display the first 30 words of the <code class="docutils literal notranslate"><span class="pre">bio</span></code>
variable.</p>
<p>Filter arguments that contain spaces must be quoted; for example, to join a
list with commas and spaced you’d use <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">list|join:&quot;,</span> <span class="pre">&quot;</span> <span class="pre">}}</span></code>.</p>
<p>Djula provides about thirty built-in template filters. You can read all about
them in the <span class="xref std std-ref">built-in filter reference</span>.
To give you a taste of what’s available, here are some of the more commonly
used template filters:</p>
</div>
<div class="section" id="list-of-filters">
<h2>List of filters<a class="headerlink" href="#list-of-filters" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="id3">
<p class="topic-title">Filters</p>
<ul class="simple">
<li><p><a class="reference internal" href="#add" id="id5">add</a></p></li>
<li><p><a class="reference internal" href="#addslashes" id="id6">addslashes</a></p></li>
<li><p><a class="reference internal" href="#capfirst" id="id7">capfirst</a></p></li>
<li><p><a class="reference internal" href="#cut" id="id8">cut</a></p></li>
<li><p><a class="reference internal" href="#date" id="id9">date</a></p></li>
<li><p><a class="reference internal" href="#time" id="id10">time</a></p></li>
<li><p><a class="reference internal" href="#datetime" id="id11">datetime</a></p></li>
<li><p><a class="reference internal" href="#default" id="id12">default</a></p></li>
<li><p><a class="reference internal" href="#reverse" id="id13">reverse</a></p></li>
<li><p><a class="reference internal" href="#sort" id="id14">sort</a></p></li>
<li><p><a class="reference internal" href="#first" id="id15">first</a></p></li>
<li><p><a class="reference internal" href="#join" id="id16">join</a></p></li>
<li><p><a class="reference internal" href="#last" id="id17">last</a></p></li>
<li><p><a class="reference internal" href="#length" id="id18">length</a></p></li>
<li><p><a class="reference internal" href="#linebreaks" id="id19">linebreaks</a></p></li>
<li><p><a class="reference internal" href="#linebreaksbr" id="id20">linebreaksbr</a></p></li>
<li><p><a class="reference internal" href="#lower" id="id21">lower</a></p></li>
<li><p><a class="reference internal" href="#safe-escape" id="id22">safe, escape</a></p></li>
<li><p><a class="reference internal" href="#slice" id="id23">slice</a></p></li>
<li><p><a class="reference internal" href="#force-escape" id="id24">force-escape</a></p></li>
<li><p><a class="reference internal" href="#format" id="id25">format</a></p></li>
<li><p><a class="reference internal" href="#replace-with" id="id26">replace … with</a></p></li>
<li><p><a class="reference internal" href="#scan" id="id27">scan</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id28">time</a></p></li>
<li><p><a class="reference internal" href="#truncatechars" id="id29">truncatechars</a></p></li>
<li><p><a class="reference internal" href="#upper" id="id30">upper</a></p></li>
<li><p><a class="reference internal" href="#urlencode" id="id31">urlencode</a></p></li>
</ul>
</div>
<div class="section" id="add">
<h3><a class="toc-backref" href="#id5">add</a><a class="headerlink" href="#add" title="Permalink to this headline">¶</a></h3>
<p>Adds the argument to the value.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">add</span><span class="o">:</span><span class="m">2</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">4</span></code>, then the output will be <code class="docutils literal notranslate"><span class="pre">6</span></code>.</p>
</div>
<div class="section" id="addslashes">
<h3><a class="toc-backref" href="#id6">addslashes</a><a class="headerlink" href="#addslashes" title="Permalink to this headline">¶</a></h3>
<p>Adds slashes before quotes. Useful for escaping strings in CSV, for example.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">addslashes</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;I'm</span> <span class="pre">using</span> <span class="pre">Djula&quot;</span></code>, the output will be
<code class="docutils literal notranslate"><span class="pre">&quot;I\'m</span> <span class="pre">using</span> <span class="pre">Djula&quot;</span></code>.</p>
</div>
<div class="section" id="capfirst">
<h3><a class="toc-backref" href="#id7">capfirst</a><a class="headerlink" href="#capfirst" title="Permalink to this headline">¶</a></h3>
<p>Capitalizes the first character of the value. If the first character is not
a letter, this filter has no effect.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">capfirst</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;djula&quot;</span></code>, the output will be <code class="docutils literal notranslate"><span class="pre">&quot;Djula&quot;</span></code>.</p>
</div>
<div class="section" id="cut">
<h3><a class="toc-backref" href="#id8">cut</a><a class="headerlink" href="#cut" title="Permalink to this headline">¶</a></h3>
<p>Removes all values of arg from the given string.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">cut</span><span class="s2">:&quot; &quot;</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;String</span> <span class="pre">with</span> <span class="pre">spaces&quot;</span></code>, the output will be
<code class="docutils literal notranslate"><span class="pre">&quot;Stringwithspaces&quot;</span></code>.</p>
</div>
<div class="section" id="date">
<h3><a class="toc-backref" href="#id9">date</a><a class="headerlink" href="#date" title="Permalink to this headline">¶</a></h3>
<p>Formats a date</p>
<dl class="simple">
<dt>Example::</dt><dd><p>{{ date-today | date }}</p>
</dd>
</dl>
<p>A LOCAL-TIME format spec can be provided:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>(defvar timestamp 3752179200)
<span class="cp">{{</span> <span class="nv">timestamp</span> <span class="o">|</span> <span class="nf">date</span><span class="o">:(:</span><span class="nv">year</span> <span class="s2">&quot;/&quot;</span> <span class="o">(:</span><span class="nv">month</span> <span class="m">2</span><span class="o">)</span> <span class="s2">&quot;/&quot;</span> <span class="o">(:</span><span class="nv">day</span> <span class="m">2</span><span class="o">))</span> <span class="cp">}}</span> ;; shows 2018/11/26
</pre></div>
</div>
</div>
<div class="section" id="time">
<h3><a class="toc-backref" href="#id10">time</a><a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h3>
<p>Formats a time</p>
<p>Example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">time-now</span> <span class="o">|</span> <span class="nf">time</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="datetime">
<h3><a class="toc-backref" href="#id11">datetime</a><a class="headerlink" href="#datetime" title="Permalink to this headline">¶</a></h3>
<p>Formats a date and time</p>
<p>Example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">time-now</span> <span class="o">|</span> <span class="nf">datetime</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="default">
<h3><a class="toc-backref" href="#id12">default</a><a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h3>
<p>If value evaluates to <code class="docutils literal notranslate"><span class="pre">False</span></code>, uses the given default. Otherwise, uses the
value.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">default</span> <span class="s2">&quot;nothing&quot;</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> (the empty string), the output will be <code class="docutils literal notranslate"><span class="pre">nothing</span></code>.</p>
</div>
<div class="section" id="reverse">
<h3><a class="toc-backref" href="#id13">reverse</a><a class="headerlink" href="#reverse" title="Permalink to this headline">¶</a></h3>
<p>Takes a list and returns that list reversed.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">list</span> <span class="o">|</span> <span class="nf">reverse</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="sort">
<h3><a class="toc-backref" href="#id14">sort</a><a class="headerlink" href="#sort" title="Permalink to this headline">¶</a></h3>
<p>Takes a list and returns that list sorted.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">list</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="first">
<h3><a class="toc-backref" href="#id15">first</a><a class="headerlink" href="#first" title="Permalink to this headline">¶</a></h3>
<p>Returns the first item in a list.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">first</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is the list <code class="docutils literal notranslate"><span class="pre">(&quot;a&quot;</span> <span class="pre">&quot;b&quot;</span> <span class="pre">&quot;c&quot;)</span></code>, the output will be <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code>.</p>
</div>
<div class="section" id="join">
<h3><a class="toc-backref" href="#id16">join</a><a class="headerlink" href="#join" title="Permalink to this headline">¶</a></h3>
<p>Joins a list with a string.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">join</span><span class="s2">:&quot; // &quot;</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is the list <code class="docutils literal notranslate"><span class="pre">(&quot;a&quot;</span> <span class="pre">&quot;b&quot;</span> <span class="pre">&quot;c&quot;)</span></code>, the output will be the string
<code class="docutils literal notranslate"><span class="pre">&quot;a</span> <span class="pre">//</span> <span class="pre">b</span> <span class="pre">//</span> <span class="pre">c&quot;</span></code>.</p>
</div>
<div class="section" id="last">
<h3><a class="toc-backref" href="#id17">last</a><a class="headerlink" href="#last" title="Permalink to this headline">¶</a></h3>
<p>Returns the last item in a list.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">last</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is the list <code class="docutils literal notranslate"><span class="pre">(&quot;a&quot;</span> <span class="pre">&quot;b&quot;</span> <span class="pre">&quot;c&quot;</span> <span class="pre">&quot;d&quot;)</span></code>, the output will be the
string <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code>.</p>
</div>
<div class="section" id="length">
<h3><a class="toc-backref" href="#id18">length</a><a class="headerlink" href="#length" title="Permalink to this headline">¶</a></h3>
<p>Returns the length of the value. This works for both strings and lists.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">length</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">(&quot;a&quot;</span> <span class="pre">&quot;b&quot;</span> <span class="pre">&quot;c&quot;</span> <span class="pre">&quot;d&quot;)</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;abcd&quot;</span></code>, the output will be
<code class="docutils literal notranslate"><span class="pre">4</span></code>.</p>
</div>
<div class="section" id="linebreaks">
<h3><a class="toc-backref" href="#id19">linebreaks</a><a class="headerlink" href="#linebreaks" title="Permalink to this headline">¶</a></h3>
<p>Replaces line breaks in plain text with appropriate HTML; a single
newline becomes an HTML line break (<code class="docutils literal notranslate"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></code>) and a new line
followed by a blank line becomes a paragraph break (<code class="docutils literal notranslate"><span class="pre">&lt;/p&gt;</span></code>).</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">linebreaks</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">Joel\nis</span> <span class="pre">a</span> <span class="pre">slug</span></code>, the output will be <code class="docutils literal notranslate"><span class="pre">&lt;p&gt;Joel&lt;br</span> <span class="pre">/&gt;is</span> <span class="pre">a</span>
<span class="pre">slug&lt;/p&gt;</span></code>.</p>
</div>
<div class="section" id="linebreaksbr">
<h3><a class="toc-backref" href="#id20">linebreaksbr</a><a class="headerlink" href="#linebreaksbr" title="Permalink to this headline">¶</a></h3>
<p>Converts all newlines in a piece of plain text to HTML line breaks
(<code class="docutils literal notranslate"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></code>).</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">linebreaksbr</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">Joel\nis</span> <span class="pre">a</span> <span class="pre">slug</span></code>, the output will be <code class="docutils literal notranslate"><span class="pre">Joel&lt;br</span> <span class="pre">/&gt;is</span> <span class="pre">a</span>
<span class="pre">slug</span></code>.</p>
</div>
<div class="section" id="lower">
<h3><a class="toc-backref" href="#id21">lower</a><a class="headerlink" href="#lower" title="Permalink to this headline">¶</a></h3>
<p>Converts a string into all lowercase.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">lower</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">Still</span> <span class="pre">MAD</span> <span class="pre">At</span> <span class="pre">Yoko</span></code>, the output will be
<code class="docutils literal notranslate"><span class="pre">still</span> <span class="pre">mad</span> <span class="pre">at</span> <span class="pre">yoko</span></code>.</p>
</div>
<div class="section" id="safe-escape">
<h3><a class="toc-backref" href="#id22">safe, escape</a><a class="headerlink" href="#safe-escape" title="Permalink to this headline">¶</a></h3>
<p>Marks a string as not requiring further HTML escaping prior to output. When
autoescaping is off, this filter has no effect.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are chaining filters, a filter applied after <code class="docutils literal notranslate"><span class="pre">safe</span></code> can
make the contents unsafe again. For example, the following code
prints the variable as is, unescaped:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">var</span><span class="o">|</span><span class="nf">safe</span><span class="o">|</span><span class="nf">escape</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="slice">
<h3><a class="toc-backref" href="#id23">slice</a><a class="headerlink" href="#slice" title="Permalink to this headline">¶</a></h3>
<p>Returns a slice of a sequence (i.e. lists, vectors, strings)</p>
<p>Uses the Common Lisp <code class="docutils literal notranslate"><span class="pre">cl-slice</span></code> library.</p>
<p>Syntax:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">seq</span> <span class="o">|</span> <span class="nf">slice</span><span class="o">:</span> <span class="nv">slices</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Each <code class="docutils literal notranslate"><span class="pre">slice</span></code> selects a subset of subscripts along the corresponding axis.</p>
<ul>
<li><p>A nonnegative integer selects the corresponding index, while a negative integer selects an index counting backwards from the last index:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">list</span> <span class="o">|</span> <span class="nf">slice</span><span class="o">:</span> <span class="m">4</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
</ul>
<p>if the list is <code class="docutils literal notranslate"><span class="pre">(1</span> <span class="pre">2</span> <span class="pre">3</span> <span class="pre">4</span> <span class="pre">5</span> <span class="pre">6)</span></code> it will output <code class="docutils literal notranslate"><span class="pre">(5)</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(start</span> <span class="pre">.</span> <span class="pre">end)</span></code> to select a range.  When <code class="docutils literal notranslate"><span class="pre">end</span></code> is <code class="docutils literal notranslate"><span class="pre">NIL</span></code>, the last index is included.</p></li>
</ul>
<p>Each boundary is resolved according to the other rules if applicable, so you can use negative integers:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>{{ string | slice: (0 . 5) }}
{{ string | slice: (5 . nil) }}
</pre></div>
</div>
<p>if the string is <code class="docutils literal notranslate"><span class="pre">&quot;Hello</span> <span class="pre">world&quot;</span></code> is will output <code class="docutils literal notranslate"><span class="pre">Hello</span></code> and <code class="docutils literal notranslate"><span class="pre">world</span></code>.</p>
</div>
<div class="section" id="force-escape">
<h3><a class="toc-backref" href="#id24">force-escape</a><a class="headerlink" href="#force-escape" title="Permalink to this headline">¶</a></h3>
<p>Forces escaping HTML characters (<code class="docutils literal notranslate"><span class="pre">&lt;,</span> <span class="pre">&gt;,</span> <span class="pre">',</span> <span class="pre">\,</span> <span class="pre">&amp;</span></code>):</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span> <span class="o">|</span> <span class="nf">force</span><span class="o">-</span><span class="nv">escape</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>It calls <code class="docutils literal notranslate"><span class="pre">djula::escape-for-html</span></code>.</p>
</div>
<div class="section" id="format">
<h3><a class="toc-backref" href="#id25">format</a><a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h3>
<p>Formats the variable according to the argument, a string formatting specifier.
This specifier uses Common Lisp string formatting syntax</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span> <span class="o">|</span> <span class="nf">format</span><span class="s2">:&quot;~:d&quot;</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">1000000</span></code>, the output will be <code class="docutils literal notranslate"><span class="pre">1,000,000</span></code>.</p>
</div>
<div class="section" id="replace-with">
<h3><a class="toc-backref" href="#id26">replace … with</a><a class="headerlink" href="#replace-with" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">replace</span></code> and the <code class="docutils literal notranslate"><span class="pre">with</span></code> filters work together:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span> <span class="o">|</span> <span class="nf">replace</span><span class="o">:</span><span class="nv">regexp</span> <span class="o">|</span> <span class="nf">with</span><span class="o">:</span><span class="nv">string</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>This will replace all occurences of the regexp in “value” with a new
string, using <code class="docutils literal notranslate"><span class="pre">ppcre:regex-replace-all</span></code>.</p>
</div>
<div class="section" id="scan">
<h3><a class="toc-backref" href="#id27">scan</a><a class="headerlink" href="#scan" title="Permalink to this headline">¶</a></h3>
<p>Extracts and displays a regexp from the value:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span> <span class="o">|</span> <span class="nf">scan</span><span class="o">:</span><span class="nv">regexp</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>This will display only the text that matches the regexp (using <code class="docutils literal notranslate"><span class="pre">ppcre:scan-to-strings</span></code>).</p>
</div>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id28">time</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Formats a time according to the given format.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span> <span class="o">|</span> <span class="nf">time</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="truncatechars">
<h3><a class="toc-backref" href="#id29">truncatechars</a><a class="headerlink" href="#truncatechars" title="Permalink to this headline">¶</a></h3>
<p>Truncates a string if it is longer than the specified number of characters.
Truncated strings will end with the :cl:symbol:<em>ELLISION-STRING</em>, which defaults to “…”.</p>
<p><strong>Argument:</strong> Number of characters to truncate to</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">truncatechars</span><span class="o">:</span><span class="m">9</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;Joel</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">slug&quot;</span></code>, the output will be <code class="docutils literal notranslate"><span class="pre">&quot;Joel</span> <span class="pre">i...&quot;</span></code>.</p>
</div>
<div class="section" id="upper">
<h3><a class="toc-backref" href="#id30">upper</a><a class="headerlink" href="#upper" title="Permalink to this headline">¶</a></h3>
<p>Converts a string into all uppercase.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">upper</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;Joel</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">slug&quot;</span></code>, the output will be <code class="docutils literal notranslate"><span class="pre">&quot;JOEL</span> <span class="pre">IS</span> <span class="pre">A</span> <span class="pre">SLUG&quot;</span></code>.</p>
</div>
<div class="section" id="urlencode">
<h3><a class="toc-backref" href="#id31">urlencode</a><a class="headerlink" href="#urlencode" title="Permalink to this headline">¶</a></h3>
<p>Escapes a value for use in a URL.</p>
<p>For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">urlencode</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;http://www.example.org/foo?a=b&amp;c=d&quot;</span></code>, the output will be
<code class="docutils literal notranslate"><span class="pre">&quot;http%3A//www.example.org/foo%3Fa%3Db%26c%3Dd&quot;</span></code>.</p>
<p>An optional argument containing the characters which should not be escaped can
be provided.</p>
<p>If not provided, the ‘/’ character is assumed safe. An empty string can be
provided when <em>all</em> characters should be escaped. For example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">urlencode</span><span class="s2">:&quot;&quot;</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;http://www.example.org/&quot;</span></code>, the output will be
<code class="docutils literal notranslate"><span class="pre">&quot;http%3A%2F%2Fwww.example.org%2F&quot;</span></code>.</p>
</div>
</div>
<div class="section" id="custom-filters">
<h2>Custom filters<a class="headerlink" href="#custom-filters" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">def-filter</span></code> macro. Its general form is:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>(def-filter :myfilter-name (value arg)
   (body))
</pre></div>
</div>
<p>It always takes the variable’s value as argument, and it can have one
required or optional argument. For example, this is how those
built-in filters are defined:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>(def-filter :capfirst (val)
  (string-capitalize (princ-to-string val)))
</pre></div>
</div>
<p>This is all there is to it. Once written, you can use it in your
templates. You can define a filter wherever you want and there is no
need to register it or to import it in your templates.</p>
<p>Here’s a filter with a required argument:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>(def-filter :add (it n)
  (+ it (parse-integer n)))
</pre></div>
</div>
<p>and with an optional one:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>(def-filter :datetime (it &amp;optional format)
  (let ((timestamp …))))
</pre></div>
</div>
<p>When you need to pass a second argument, make your filter return a
lambda function and chain it with the <code class="docutils literal notranslate"><span class="pre">with</span></code> filter:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>(def-filter :replace (it regex)
   (lambda (replace)
     (ppcre:regex-replace-all regex it replace)))

(def-filter :with (it replace)
   (funcall it replace))
</pre></div>
</div>
<p>Now we can write:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">value</span> <span class="o">|</span> <span class="nf">replace</span><span class="o">:</span><span class="nv">foo</span> <span class="o">|</span> <span class="nf">with</span><span class="o">:</span><span class="nv">bar</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Errors are handled by the macro, but you can handle them and return a
<code class="docutils literal notranslate"><span class="pre">template-error</span></code> condition:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>(def-filter :handle-error-filter (it)
   (handler-case
         (do-something)
     (condition (e)
       (template-error &quot;There was an error executing this filter: ~A&quot; e))))
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Nick Allen.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>